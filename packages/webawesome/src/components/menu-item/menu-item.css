:host {
  --background-color-hover: var(--wa-color-neutral-fill-normal);
  --text-color-hover: var(--wa-color-neutral-on-normal);
  --submenu-offset: -0.125rem;

  display: block;
  color: var(--wa-color-text-normal);
  position: relative;
  display: flex;
  align-items: stretch;
  font: inherit;
  padding: 0.5em 0.25em;
  line-height: var(--wa-line-height-condensed);
  transition: fill var(--wa-transition-normal) var(--wa-transition-easing);
  user-select: none;
  -webkit-user-select: none;
  white-space: nowrap;
  cursor: pointer;
}

:host([inert]) {
  display: none;
}

:host([disabled]) {
  outline: none;
  opacity: 0.5;
  cursor: not-allowed;
}

:host([loading]) {
  outline: none;
  cursor: wait;
}

:host([loading]) *:not(wa-spinner) {
  opacity: 0.5;
}

:host([loading]) wa-spinner {
  --indicator-color: currentColor;
  --track-width: round(0.0625em, 1px);
  position: absolute;
  font-size: var(--wa-font-size-smaller);
  top: calc(50% - 0.5em);
  left: 0.6em;
  opacity: 1;
}

.label {
  flex: 1 1 auto;
  display: inline-block;
  text-overflow: ellipsis;
  overflow: hidden;
}

.prefix {
  flex: 0 0 auto;
  display: flex;
  align-items: center;
}

.prefix::slotted(*) {
  margin-inline-end: 0.5em;
}

.suffix {
  flex: 0 0 auto;
  display: flex;
  align-items: center;
}

.suffix::slotted(*) {
  margin-inline-start: 0.5em;
}

/* Safe triangle */
:host(:state(submenu-expanded))::after {
  content: '';
  position: fixed;
  z-index: 899;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  clip-path: polygon(
    var(--safe-triangle-cursor-x, 0) var(--safe-triangle-cursor-y, 0),
    var(--safe-triangle-submenu-start-x, 0) var(--safe-triangle-submenu-start-y, 0),
    var(--safe-triangle-submenu-end-x, 0) var(--safe-triangle-submenu-end-y, 0)
  );
}

:host(:focus-visible) {
  outline: none;
}

:host(:hover:not([aria-disabled='true'], :focus-visible)),
:host(:state(submenu-expanded)) {
  background-color: var(--background-color-hover);
  color: var(--text-color-hover);
}

:host(:focus-visible) {
  outline: var(--wa-focus-ring);
  outline-offset: calc(-1 * var(--wa-focus-ring-width));
  background: var(--background-color-hover);
  color: var(--text-color-hover);
  opacity: 1;
}

.check,
.chevron {
  flex: 0 0 auto;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: var(--wa-font-size-smaller);
  width: 2em;
  visibility: hidden;
}

:host([checked]) .check,
:host(:state(has-submenu)) .chevron {
  visibility: visible;
}

/* Add elevation and z-index to submenus */
wa-popup::part(popup) {
  box-shadow: var(--wa-shadow-m);
  z-index: 900;
  margin-left: var(--submenu-offset);
}

wa-popup:dir(rtl)::part(popup) {
  margin-left: calc(-1 * var(--submenu-offset));
}

@media (forced-colors: active) {
  :host(:hover:not([aria-disabled='true'])),
  :host(:focus-visible) {
    outline: dashed 1px SelectedItem;
    outline-offset: -1px;
  }
}

::slotted(wa-menu) {
  max-width: var(--auto-size-available-width) !important;
  max-height: var(--auto-size-available-height) !important;
}
